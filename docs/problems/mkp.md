MKP: (Multi-Objective Knapsack Problem)
---

# ナップザック問題

ナップザック問題は、ナップザックの中にいくつかの品物を詰め込み、入れた品物の総価値を最大化するという問題である。ただしナップザックと品物にはそれぞれ容量やサイズが与えられていて、入れた品物のサイズの総和がナップザックの容量を超えてはいけないという条件がある。この問題は組み合わせ最適化問題の代表的な1つとしてよく知られており、プロジェクトの選択や物資の購入などの問題に応用されている。

以下に例題を示す。



- 容量65のナップサックに次の表にある品物を詰め込むことにする。この時，詰め込んだ品物の総価値を最大にするためには何をいくつ詰め込むと良いか？ただし、同じ品物を何個詰め込んでも良いとする。


<div style="text-align: center;">

| 品物 | 1個あたりの価値 | 1個あたりのサイズ |
|:-:|:-:|:-:|
| 缶コーヒー | 120 | 10 |
| 水入りペットボトル | 130 | 12 |
| バナナ| 80| 7 |
| りんご| 100| 9 |
| おにぎり | 250| 21 |
| パン | 185 | 16 |

</div>


この場合、以下のように定式化できる。

### 整数変数

- `coffee`: 缶コーヒーの個数
- `water`: 水入りペットボトルの個数
- `banana`: バナナの個数
- `apple`: りんごの個数
- `rice_ball`: おにぎりの個数
- `bread`: パンの個数

### 目的関数

```math
\max \quad 120 \cdot \text{coffee} + 130 \cdot \text{water} + 80 \cdot \text{banana} + 100 \cdot \text{apple} + 250 \cdot \text{rice\_ball} + 185 \cdot \text{bread}
```

### 制約条件

**容量に関する制約：**

```math
10 \cdot \text{coffee} + 12 \cdot \text{water} + 7 \cdot \text{banana} + 9 \cdot \text{apple} + 21 \cdot \text{rice\_ball} + 16 \cdot \text{bread} \leq 65
```

**非負制約：**

- $\text{coffee} \geq 0$: 缶コーヒーは0個以上詰め込む
- $\text{water} \geq 0$: 水入りペットボトルは0個以上詰め込む
- $\text{banana} \geq 0$: バナナは0個以上詰め込む
- $\text{apple} \geq 0$: りんごは0個以上詰め込む
- $\text{rice\_ball} \geq 0$: おにぎりは0個以上詰め込む
- $\text{bread} \geq 0$: パンは0個以上詰め込む


### 解

上の式を解くと
```math
\text{coffee}=3, \text{water}=0, \text{banana}=2, 
\text{apple}=0, \text{rice\_ball}=1, \text{bread}=0, 
\text{max}=770
``` 
となり、「缶コーヒーを３個、バナナを２個、おにぎりを１個詰め込むとよい」となる。

ここで、各品物のナップザックに詰め込むことができる数を1個までにすると、典型的な **0/1ナップザック問題** になる。



# 多次元ナップザック問題　

多次元ナップザック問題とは、通常のナップザック問題の制約の数を複数に増やしたものである。

アイテムが$n$個、制約(資源・容量)が$m$個あるとする。
- 各アイテム$i$を選ぶかどうか: $x_i \in \{0, 1\}$
- 価値(利益): $p_i$
- 制約$j$に対する重み(消費量): $w_{j,i}$
- 制約$j$の容量: $c_j$
とすると、目的と制約は

```math
\max \sum_{i=1}^n p_i x_i \\
\text{s.t.} \quad \sum_{i=1}^n w_{j,i} x_i \leq c_j \quad (j = 1, \ldots, m) \\
x_i \in \{0, 1\}
```
